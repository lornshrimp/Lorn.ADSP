# 后台管理运营系统 - 系统概述与整体架构

## 系统定位

后台管理运营系统是Lorn.ADSP开源广告平台的核心基础设施模块，专注于为广告系统提供必要的用户管理、权限控制和系统管理功能。该系统设计简洁高效，避免复杂的OA流程，专门服务于广告系统的业务需求。

## 核心价值

### 专注广告业务
- 为广告系统提供必要的用户和权限管理
- 支持广告业务相关的角色和权限控制
- 简化的组织架构管理，服务于权限分配

### 简洁高效
- 避免复杂的审批流程，专注核心功能
- 提供基础的CRUD操作和权限验证
- 保持系统的轻量级和高性能

### 开源友好
- 为开源广告系统提供标准化权限接口
- 支持扩展但保持核心功能简洁
- 易于部署和维护的架构设计

## 系统边界

### 管理对象
- **管理运营人员**：广告系统的内部工作人员，包括系统管理员、业务运营人员等
- **非管理对象**：广告系统触达的普通网民用户（由其他用户管理模块负责）

### 功能边界
- **核心职责**：用户管理、权限控制、基础组织架构
- **接口服务**：为业务模块提供权限验证和用户信息服务
- **管理门户**：统一的管理界面和各业务模块的宿主平台
- **不包含**：复杂的OA流程、审批工作流、人事管理等

## 整体架构设计

### 模块划分

```
后台管理运营系统
├── 组织架构管理模块
│   ├── 部门管理（简化的上下级关系）
│   └── 岗位管理（基础岗位信息）
├── 人员管理模块
│   ├── 用户基本信息管理
│   ├── 账户状态管理
│   └── 组织关系维护
├── 权限管理模块
│   ├── 权限定义管理
│   ├── 权限分配管理
│   └── 权限验证服务
├── 角色管理模块
│   ├── 角色定义管理
│   ├── 角色权限配置
│   └── 用户角色分配
├── 认证服务模块
│   ├── 用户名密码登录
│   ├── 会话管理服务
│   └── 第三方认证接口（预留）
├── 管理门户模块
│   ├── 统一管理界面
│   ├── 菜单管理系统
│   └── 个人中心功能
├── 权限接口服务
│   ├── RESTful API
│   └── 权限验证服务
├── 审计日志模块
│   ├── 操作日志记录
│   └── 日志查询分析
└── 系统配置模块
    ├── 基础配置管理
    └── 系统参数管理
```

### 技术架构层次

#### 表现层
- **Web管理界面**：基于ASP.NET Core的Web管理界面

#### 服务层
- **权限服务**：核心权限验证和管理服务
- **认证服务**：用户身份认证和会话管理
- **用户服务**：用户和组织管理服务
- **配置服务**：系统配置和参数管理服务

#### 数据层
- **主数据库**：SQL Server（用户、权限、组织数据）
- **缓存层**：Redis缓存提升权限验证性能
- **日志存储**：Elasticsearch用于日志分析和搜索

## 关键设计原则

### 权限控制原则
1. **Deny优先原则**：拒绝权限优先于允许权限
2. **最小权限原则**：用户只获得完成工作所需的最小权限
3. **权限继承原则**：支持从角色和组织层级继承权限
4. **简化委派原则**：支持基础的权限委派，避免复杂流程

### 简洁性原则
1. **功能聚焦**：专注于广告系统必需的功能
2. **流程简化**：避免复杂的审批和工作流
3. **接口标准化**：提供简洁的权限验证接口
4. **配置化管理**：通过配置适应不同部署场景

### 开源友好原则
1. **易于部署**：简化部署和配置过程
2. **文档完善**：提供完整的部署和使用文档
3. **扩展性好**：预留扩展接口但保持核心简洁
4. **社区友好**：代码结构清晰，便于社区贡献

## 用户角色定义

### 系统管理员
- **职责**：系统配置、用户管理、权限策略制定
- **权限**：系统管理的完整权限
- **使用场景**：系统部署、配置管理、用户权限管理

### 业务管理员
- **职责**：各业务模块的管理和运营
- **权限**：特定业务模块的管理权限
- **使用场景**：广告管理、数据分析、客户服务

### 普通运营人员
- **职责**：具体的业务操作和数据处理
- **权限**：特定功能的操作权限
- **使用场景**：日常业务操作、数据录入、报表查看

## 系统集成方案

### 与业务模块集成
- **权限接口**：提供标准化的权限验证API
- **用户信息接口**：提供用户基本信息和组织关系
- **菜单注册接口**：支持业务模块动态注册菜单
- **配置接口**：提供系统配置查询接口

### 与外部系统集成（预留）
- **第三方认证**：支持LDAP、OAuth等第三方认证方式
- **监控系统集成**：与系统监控平台的集成
- **日志系统集成**：与外部日志系统的数据对接

## 性能和可用性要求

### 性能指标
- **权限验证响应时间**：< 10ms
- **用户登录响应时间**：< 500ms
- **并发用户支持**：500+在线用户
- **权限接口QPS**：5000+请求/秒

### 可用性要求
- **系统可用性**：99%
- **数据一致性**：强一致性要求
- **故障恢复时间**：< 10分钟
- **数据备份策略**：定期备份

## 安全要求

### 数据安全
- **密码加密存储**：使用安全算法加密存储密码
- **传输安全**：HTTPS加密传输
- **访问控制**：基于角色的访问控制（RBAC）
- **敏感信息保护**：敏感配置和日志的保护

### 审计要求
- **操作日志**：记录所有关键操作
- **登录日志**：记录用户登录活动
- **权限变更日志**：记录权限变更操作
- **系统访问日志**：记录系统访问情况

## 部署架构

### 单机部署
- **适用场景**：小规模部署、开发测试环境
- **组件部署**：所有组件部署在单台服务器
- **数据库**：使用SQLite或SQL Server Express
- **缓存**：使用内存缓存

### 分布式部署
- **适用场景**：生产环境、大规模部署
- **服务分离**：各服务独立部署
- **数据库**：使用SQL Server集群
- **缓存**：使用Redis集群
- **负载均衡**：使用Nginx或其他负载均衡器