# 组织架构管理模块产品需求

## 模块概述

组织架构管理模块是广告系统后台管理的基础模块，专门为广告系统的权限控制和人员管理提供组织结构支撑。该模块采用简化设计，重点支持部门层级管理和基础岗位设置，为广告系统的权限分配提供组织基础。

## 核心功能需求

### 2.1 部门管理功能

#### 2.1.1 部门基本信息管理
- **部门名称**：部门的显示名称
- **部门编码**：系统内唯一的部门标识
- **部门描述**：简要的部门功能描述
- **上级部门**：部门的上级部门（仅支持上下级关系）
- **部门状态**：启用、禁用状态
- **负责人**：部门负责人（可选）

#### 2.1.2 部门层级结构
- **树形结构**：支持多级部门的树形结构
- **上下级关系**：简单的上下级部门关系
- **部门路径**：显示完整的部门路径
- **层级限制**：建议不超过5级部门层次

#### 2.1.3 部门基本操作
- **新增部门**：在指定父部门下创建新部门
- **编辑部门**：修改部门基本信息
- **删除部门**：删除空部门（需检查是否有关联人员）
- **移动部门**：调整部门在组织架构中的位置
- **启用/禁用**：控制部门的启用状态

### 2.2 岗位管理功能

#### 2.2.1 岗位基本信息
- **岗位名称**：岗位的显示名称
- **岗位编码**：系统内唯一的岗位标识
- **岗位描述**：岗位的职责描述
- **岗位状态**：启用、禁用状态
- **关联部门**：岗位可以关联的多个部门

#### 2.2.2 岗位基本操作
- **新增岗位**：创建新岗位并可关联多个部门
- **编辑岗位**：修改岗位基本信息和部门关联关系
- **删除岗位**：删除无人员关联的岗位
- **启用/禁用**：控制岗位的启用状态
- **部门关联管理**：管理岗位与部门的多对多关联关系

## 用户界面设计

### 2.3 部门管理界面

#### 2.3.1 部门树形视图
- **树形结构**：左侧显示完整的部门树形结构
- **展开折叠**：支持部门节点的展开和折叠
- **搜索功能**：支持部门名称的快速搜索
- **右键菜单**：提供新增、编辑、删除等快捷操作

#### 2.3.2 部门详情面板
- **基本信息**：显示部门的基本信息
- **人员统计**：显示部门人员数量
- **岗位列表**：显示部门下的所有岗位
- **操作按钮**：提供编辑、删除等操作按钮

### 2.4 岗位管理界面

#### 2.4.1 岗位列表视图
- **表格展示**：以表格形式展示岗位信息
- **筛选功能**：支持按部门、状态等条件筛选
- **排序功能**：支持按创建时间等排序
- **批量操作**：支持批量启用/禁用操作

#### 2.4.2 岗位编辑界面
- **基本信息编辑**：编辑岗位基本信息
- **部门选择**：选择岗位所属部门
- **状态设置**：设置岗位启用状态

## 数据模型设计

### 2.5 部门数据模型

```
部门表 (Department)
├── 部门ID (DepartmentId) - 主键
├── 部门编码 (DepartmentCode) - 唯一编码
├── 部门名称 (DepartmentName) - 部门名称
├── 父部门ID (ParentDepartmentId) - 外键，可为空
├── 部门层级 (Level) - 部门层级
├── 部门路径 (Path) - 完整路径
├── 负责人ID (ManagerId) - 外键，可为空
├── 部门描述 (Description) - 部门描述
├── 部门状态 (Status) - 状态枚举（启用/禁用）
├── 排序号 (SortOrder) - 排序号
├── 创建时间 (CreatedTime) - 创建时间
├── 更新时间 (UpdatedTime) - 更新时间
└── 创建人ID (CreatedBy) - 创建人
```

### 2.6 岗位数据模型

```
岗位表 (Position)
├── 岗位ID (PositionId) - 主键
├── 岗位编码 (PositionCode) - 唯一编码
├── 岗位名称 (PositionName) - 岗位名称
├── 岗位描述 (Description) - 岗位描述
├── 岗位状态 (Status) - 状态枚举（启用/禁用）
├── 排序号 (SortOrder) - 排序号
├── 创建时间 (CreatedTime) - 创建时间
├── 更新时间 (UpdatedTime) - 更新时间
└── 创建人ID (CreatedBy) - 创建人
```

### 2.7 岗位部门关联数据模型

```
岗位部门关联表 (PositionDepartment)
├── 关联ID (RelationId) - 主键
├── 岗位ID (PositionId) - 外键
├── 部门ID (DepartmentId) - 外键
├── 关联状态 (Status) - 状态枚举（启用/禁用）
├── 创建时间 (CreatedTime) - 创建时间
├── 更新时间 (UpdatedTime) - 更新时间
└── 创建人ID (CreatedBy) - 创建人
```

## 权限控制设计

### 2.7 功能权限定义

#### 2.7.1 部门管理权限
- **部门查看权限**：查看部门信息和结构
- **部门管理权限**：创建、编辑、删除部门
- **部门状态权限**：启用、禁用部门

#### 2.7.2 岗位管理权限
- **岗位查看权限**：查看岗位信息
- **岗位管理权限**：创建、编辑、删除岗位
- **岗位状态权限**：启用、禁用岗位

### 2.8 数据权限控制

#### 2.8.1 部门数据权限
- **全部门权限**：可以查看和管理所有部门
- **本部门权限**：只能查看和管理本部门及下级部门
- **指定部门权限**：只能查看和管理指定部门

## 系统集成接口

### 2.9 对外提供接口

#### 2.9.1 部门信息接口
- **获取部门树**：返回完整的部门树形结构
- **获取部门信息**：根据部门ID获取详细信息
- **获取子部门**：获取指定部门的所有子部门
- **部门人员统计**：获取部门人员数量统计

#### 2.9.2 岗位信息接口
- **获取岗位列表**：获取指定条件的岗位列表
- **获取岗位信息**：根据岗位ID获取详细信息
- **获取部门岗位**：获取指定部门的所有岗位
- **获取岗位部门关联**：获取岗位与部门的关联关系
- **管理岗位部门关联**：管理岗位与部门的多对多关联关系

### 2.10 业务规则

#### 2.10.1 部门管理规则
- **删除限制**：有人员关联的部门不能删除
- **移动限制**：不能将部门移动到其子部门下
- **层级限制**：建议部门层级不超过5级
- **编码唯一性**：部门编码在系统内必须唯一

#### 2.10.2 岗位管理规则
- **删除限制**：有人员关联的岗位不能删除
- **部门关联**：岗位可以关联到一个或多个有效的部门
- **编码唯一性**：岗位编码在系统内必须唯一
- **关联关系管理**：岗位与部门的关联关系可以独立管理，支持动态调整

## 技术实现要求

### 2.11 性能要求
- **查询性能**：部门树查询响应时间 < 100ms
- **并发支持**：支持100+并发用户操作
- **数据一致性**：保证组织架构数据的一致性

### 2.12 扩展性要求
- **接口标准化**：提供标准化的组织架构查询接口
- **缓存支持**：支持组织架构数据的缓存
- **变更通知**：组织架构变更时的通知机制